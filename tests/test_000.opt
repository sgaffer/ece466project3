	.ORIG x2000
	JSR main
	HALT
main:	ADD R6, R6, #-1
	IN 
	ADD R6, R6, #-1
	ADD R13, R0, #0
	STR R7, R6, #0
	ADD R6, R6, #-1
	ADD R11, R13, #0
	STR R5, R6, #0
	ADD R5, R6, #-1
	ADD R6, R6, #-320
	ADD R24, R11, #0
	ADD R12, R5, #-116
	ADD R33, R5, #-116
L1:	ADD R6, R6, #320
	ADD R9, R12, #0
	ADD R14, R9, #0
	ADD R26, R9, #0
	ADD R30, R9, #0
	ADD R0, R14, #0
	MUL R30, R30, #1
	OUT 
	SET R15, #0
	SET R17, #100
	ADD R8, R15, #0
L2:	ADD R16, R8, #0
	ADD R19, R8, #0
	ADD R23, R8, #0
L3:	ADD R27, R8, #0
	SUB R18, R16, R17
	BRn R18, L5
	SET R18, #0
L5:	NOP 
	ADD R10, R19, #0
	ADD R25, R23, R24
	STR R25, R26, #0
	BRz R18, L4
	ADD R20, R10, #0
	SET R21, #1
	SET R28, #1
	SET R31, #1
	ADD R22, R20, R21
	ADD R29, R27, R28
	ADD R32, R30, R31
	ADD R10, R22, #0
	ADD R8, R29, #0
	ADD R9, R32, #0
	BRA L2
L4:	NOP 
	SET R34, #50
	MUL R35, R34, #1
	ADD R36, R33, R35
	LDR R37, R36, #0
	ADD R0, R37, #0
	OUT 
	LDR R5, R6, #0
	ADD R6, R6, #1
	SET R38, #0
	STR R38, R5, #3
	BRA L1
	LDR R7, R6, #0
	ADD R6, R6, #1
	RET 
	.END
